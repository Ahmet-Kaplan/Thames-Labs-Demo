<template name="stripeSubscribe">
  <div class="modal fade" id="draggableModal" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
      <div class="modal-content">

        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
          <h4>Subscribe to Paying Plan</h4>
        </div>

        <div class="modal-body">
          {{#if showExplain}}
          <p>
            You have reached the maximum number of free accounts. You can add additional users by setting up a payment plan.
            Remember that <b>you will keep your free user{{#unless equals freeUsers 1}}s{{/unless}}</b>. Only the extra users will be charged.
          </p>
          {{/if}}

          Select your currency:
          <label class="currency"><input type="radio" name="selectCurrency" value="gbp" checked="{{#if equals paymentCurrency 'gbp'}}checked{{/if}}"> <i class="fa fa-fw fa-gbp"></i> (GBP) </label>
          <label class="currency"><input type="radio" name="selectCurrency" value="eur" checked="{{#if equals paymentCurrency 'eur'}}checked{{/if}}"> <i class="fa fa-fw fa-eur"></i> (EUR) </label>
          <label class="currency"><input type="radio" name="selectCurrency" value="usd" checked="{{#if equals paymentCurrency 'usd'}}checked{{/if}}"> <i class="fa fa-fw fa-usd"></i> (USD) </label>
          <br />Please find below the details of your subscription:

          <div class="well well-sm">
          {{#if planDetails}}
          {{#with planDetails}}
            <div class="row">
              <div class="col-xs-6"><em>Free user{{#unless equals freeUsers 1}}s{{/unless}}</em></div>
              <div class="col-xs-6">{{freeUsers}}</div>
            </div>
            <div class="row">
              <div class="col-xs-6"><em>Plan</em></div>
              <div class="col-xs-6">Additional User</div>
            </div>
            {{#if hasCoupon}}
            <div class="row">
              <div class="col-xs-6" id="couponInfo"><em>Coupon</em> {{couponName}}</div>
              <div class="col-xs-6">{{couponDetails}}</div>
            </div>
            {{/if}}
            <div class="row">
              <div class="col-xs-6"><em>Price</em></div>
              <div class="col-xs-6">{{#if equals amount correctedAmount}}{{amount}}{{else}}<del>{{amount}}</del> {{correctedAmount}}{{/if}} /additional user /{{interval}}</div>
            </div>
          {{/with}}
          {{else}}
            {{> loadingSmall}}
          {{/if}}
          </div>

          <br>To complete your payment plan, enter your card details below.
          <br />Please note that none of the card information is stored by us.
        </div>

        <form id="subscribe">
          <div class="modal-body">
            <div class="well well-sm">
            {{>cardForm buttonText="Subscribe" showEmail=true}}
              <div class="form-group">
                <div class="row">
                  <div class="col-xs-6">
                    <label for="email" class="control-label">Email for invoices</label>
                    <input type="text" id="email" class="form-control" placeholder="you@domain.com" value="{{userEmail}}" required />
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="modal-footer">
            <button type="submit" id="submit" class="btn btn-primary"><i class="fa fa-lock"></i> Subscribe</button>
          </div>
        </form>

      </div>
    </div>
  </div>
</template>