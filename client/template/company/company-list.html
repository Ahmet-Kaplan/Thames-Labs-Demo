<template name="companyList">

  {{setPageTitle 'Companies'}}

  <div class="row" id="company-list">
    <div class="col-md-12">
      <h1 id="companies-page-header"><i class="fa fa-building"></i> Companies</h1>
      <div class="stick-bar">
        <div class="row">
          <div class="col-md-3">
            {{> EasySearch.Input index=CompaniesIndex attributes=searchInputAttributes}}
          </div>
          <div class="col-md-3">
          {{#if isInRole 'Administrator,CanCreateCompanies'}}
            <button type="submit" class="btn btn-primary{{#if isMobile}} btn-fullWidth{{/if}}" id="add-company" data-toggle="tooltip" data-placement="bottom" title="Ctrl+Alt+C"><i class="fa fa-fw fa-plus"></i> Add company</button>
          {{/if}}
          </div>
        </div>
      </div>
      <small>{{companyCount}} record{{#if hasMultipleCompanies}}s{{/if}}</small>

      <div class="list-group" id="mchCompanyList">
        {{#EasySearch.Each index=CompaniesIndex}}
          {{> companyListItem}}
        {{/EasySearch.Each}}

        {{#EasySearch.IfNoResults index=CompaniesIndex}}
          <h4 id="mchNoCompaniesPlaceholder">No companies found</h4>
        {{/EasySearch.IfNoResults}}

        {{#EasySearch.IfSearching index=CompaniesIndex}}
          {{> spinner}}
        {{/EasySearch.IfSearching}}

        {{> loadMore index=CompaniesIndex}}
      </div>

    </div>
  </div>

</template>

<template name="companyListItem">
  <a class="list-group-item clearfix" href="{{pathFor route='company' id=__originalId}}" id='mchCompany'>
    <div class="row">
      <div class="col-sm-12 col-md-5 col-lg-4">
        <span class="pull-left">
          {{> companyLogo url=website class="img-circle logo-small" showPlaceholder=true}}
        </span>
        <h4 class="list-group-item-heading">{{name}}</h4> <p class="list-group-item-text"></p>
      </div>
      <div class="hidden-xs hidden-sm col-md-3 col-lg-3">
        <i class="fa fa-fw fa-map-marker"></i> {{address}}, {{city}} {{postcode}}, {{country}}
      </div>
      <div class="hidden-xs hidden-sm hidden-md col-lg-2">
        {{#if website}}<i class="fa fa-fw fa-globe"></i> <a href="{{website}}" target="_blank">{{shortWebsite}}</a><br>{{/if}}
        {{#if phone}}<i class="fa fa-fw fa-phone"></i> {{phone}}{{/if}}
      </div>
      <div class="col-sm-12 col-md-4 col-lg-3">
        <span class="pull-right">{{> tagBadges}}</span>
      </div>
    </div>
  </a>
</template>

<template name="wordHelpModal">
  <div class="modal fade" id="draggableModal" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
          <h4>Help on templates</h4>
        </div>
        <div class="modal-body">
          <p>You can create a template by using Word, creating a new document, populating it with your content and include Keywords that RealTime recognises which will allow RealTime to personalise and fill your template for you. You can then upload your
            template whenever you need to use it and save time.</p>
          <p>Keywords which are recognised by RealTime:</p>
          <ul>
            <li>{name} - Company name</li>
            <li>{address} - 1st line of company address</li>
            <li>{city} - Company's city / town</li>
            <li>{county} - Company's county / state</li>
            <li>{postcode} - Company's postcode / zip</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</template>

<template name="importCompanyHelpModal">
  <div class="modal fade" id="draggableModal" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
          <h4>Importing with templates</h4>
        </div>
        <div class="modal-body">
          <p>Importing companies couldn't be simpler:</p>
          <ol type="1">
            <li>Download the template that we've provided.</li>
            <li>Fill it with your data. The first row indicates what to put where. Please don't alter this line, or the import will fail.</li>
            <li>Click the Import option.</li>
            <li>Select the completed file and press the Open button.</li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</template>
