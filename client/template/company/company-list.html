<template name="companyList">

  {{setPageTitle 'Companies'}}

  <div class="row" id="company-list">
    <div class="col-md-3">
      <div class="sidebar">
        <h1>Actions</h1>
        {{> EasySearch.Input index=CompaniesIndex attributes=searchInputAttributes}}
        {{#if isInRole 'Administrator,CanCreateCompanies'}}
          <div class="btn-group-vertical">
            <button type="submit" class="btn btn-primary" id="add-company"><i class="fa fa-fw fa-plus"></i> Add company</button>
            <button type="submit" class="btn btn-primary" id="export-companies"><i class="fa fa-fw fa-download"></i> Export company data</button>
          </div>
        {{/if}}
      </div>
    </div>

    <div class="col-md-9">

      <h1 id="companies-page-header"><i class="fa fa-building"></i> Companies</h1>
      <div class="pull-right">
        {{> EasySearch.Pagination index=CompaniesIndex}}
      </div>
      <small>{{companyCount}} record{{#if hasMultipleCompanies}}s{{/if}}</small>

      <div class="list-group" id="mchCompanyList">
        {{#EasySearch.Each index=CompaniesIndex}}
          {{> companyListItem}}
        {{/EasySearch.Each}}

        {{#EasySearch.IfNoResults index=CompaniesIndex}}
          <h4 id="mchNoCompaniesPlaceholder">No companies found</h4>
        {{/EasySearch.IfNoResults}}

        {{#EasySearch.IfSearching index=CompaniesIndex}}
          {{> spinner}}
        {{/EasySearch.IfSearching}}
      </div>
      <div class="pull-right">
        {{> EasySearch.Pagination index=CompaniesIndex}}
      </div>

    </div>
  </div>

</template>

<template name="companyListItem">
  <a class="list-group-item clearfix" href="{{pathFor route='company' id=__originalId}}" id='mchCompany'>
    <span class="pull-left">
      {{> companyLogo url=website class="img-circle logo-small" showPlaceholder=true}}
    </span>
    <span class="pull-right">{{> tagBadges}}</span>
    <h4 class="list-group-item-heading">{{name}}</h4> <p class="list-group-item-text"><i class="fa fa-fw fa-map-marker"></i> {{city}}, {{country}}</p>
  </a>

</template>

<template name="wordHelpModal">
  <div class="modal fade" id="draggableModal" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
          <h4>Help on templates</h4>
        </div>
        <div class="modal-body">
          <p>You can create a template by using Word, creating a new document, populating it with your content and include Keywords that RealTime recognises which will allow RealTime to personalise and fill your template for you. You can then upload your
            template whenever you need to use it and save time.</p>
          <p>Keywords which are recognised by RealTime:</p>
          <ul>
            <li>{name} - Company name</li>
            <li>{address} - 1st line of company address</li>
            <li>{city} - Company's city / town</li>
            <li>{county} - Company's county / state</li>
            <li>{postcode} - Company's postcode / zip</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</template>

<template name="importCompanyHelpModal">
  <div class="modal fade" id="draggableModal" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
          <h4>Importing with templates</h4>
        </div>
        <div class="modal-body">
          <p>Importing companies couldn't be simpler:</p>
          <ol type="1">
            <li>Download the template that we've provided.</li>
            <li>Fill it with your data. The first row indicates what to put where. Please don't alter this line, or the import will fail.</li>
            <li>Click the Import option.</li>
            <li>Select the completed file and press the Open button.</li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</template>
