<template name="projectsList">

  {{setPageTitle 'Projects'}}

  <div class="row">
    <div class="col-md-2">
      <div class="sidebar">
        <h1>Actions</h1>
        {{> esInput index="projects" placeholder="search projects..." allDocsOnEmpty=true reactive=false class="form-control"}} {{#if isInRole 'Administrator,CanCreateProjects'}}
        <div class="btn-group-vertical">
          <a href="#" id="add-project" class="btn btn-primary"><i class="fa fa-fw fa-plus"></i> Add project</a>
        </div>
        {{/if}}
      </div>
    </div>

    <div class="col-md-10" id="project-list">
      <h1><i class="fa fa-files-o"></i> Projects</h1>

      <div class="col-md-10">
        {{#if hasProjects}}
        <div class="list-group">
          {{#ifEsIsSearching index="projects"}} {{> spinner}} {{else}} {{#esEach index="projects"}} {{> projectListItem}} {{/esEach}} {{> esLoadMoreButton index="projects" class="btn btn-default"}} {{/ifEsIsSearching}}
        </div>
        {{else}}
        <br />
        <h4 style="color:gray;">No projects</h4>
        {{/if}}
      </div>
    </div>
  </div>
</template>

<template name="projectListItem">

  <a class="list-group-item" href="{{pathFor route='project' id=_id}}">
    <span class="pull-right">{{> tagBadges doc=this type="projects"}}</span>
    <h4 class="list-group-item-heading"><i class="fa fa-fw fa-files-o"></i> {{description}}</h4>
    {{#if companyName}}
    <p class="list-group-item-text"><i class="fa fa-fw fa-building"></i> {{companyName}}</p>
    {{/if}} {{#if contactName}}
    <p class="list-group-item-text"><i class="fa fa-fw fa-user"></i> {{contactName}}</p>
    {{/if}}
    <p class="list-group-item-text"><i class="fa fa-fw fa-money"></i> Value: Â£{{decimal value}}</p>
  </a>

</template>
