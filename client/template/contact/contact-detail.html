<template name="contactDetail">
  {{#with contactData}} {{setPageTitle "Contact - " name }}
  <div class="row">
    <div class="col-md-2 hidden-xs hidden-sm">
      <div class="sidebar">
        <h1>Actions</h1>

        <ul class="nav nav-stacked">
          <li><a href="#contact-details">Contact details</a></li>
          <li><a href="#activity-timeline">Activity timeline</a></li>
        </ul>

      </div>
    </div>

    <div class="col-md-10">
      <h1 id="contact-details">{{name}}</h1>

      {{> tagInput}}

      <div class="panel panel-default">
        <div class="panel-heading">
          <div class="btn-group pull-right">
            {{#afModal class="btn btn-info btn-xs" collection="Contacts" doc=_id operation="update" formId="updateContactForm" omitFields="companyId"}} Edit contact details {{/afModal}} {{#afModal class="btn btn-danger btn-xs" collection="Contacts" doc=_id operation="remove"
            formId="removeContactForm" onSuccess="onContactRemove"}} Delete contact {{/afModal}}

          </div>
          Contact details</div>
        <ul class="list-group">
          {{#if company}}
          <a href="{{pathFor route='company' id=company._id}}" class="list-group-item">
            <i class="fa fa-fw fa-building"></i> {{company.name}}
            <i class="fa fa-fw fa-chevron-right pull-right"></i>
          </a>
          {{/if}} {{#if jobtitle}}
          <li class="list-group-item">
            <i class="fa fa-fw fa-graduation-cap"></i> {{jobtitle}}
          </li>
          {{/if}} {{#if email}}
          <li class="list-group-item">
            <i class="fa fa-fw fa-envelope"></i> {{email}}
          </li>
          {{/if}} {{#if phone}}
          <li class="list-group-item">
            <i class="fa fa-fw fa-phone"></i> {{phone}}
          </li>
          {{/if}} {{#if mobile}}
          <li class="list-group-item">
            <i class="fa fa-fw fa-mobile"></i> {{mobile}}
          </li>
          {{/if}}
        </ul>
      </div>
      
      <div class="panel panel-default">
        <div class="panel-heading" id="projects">
          Projects
          <a href="#" id="add-project" class="btn btn-primary btn-xs pull-right">Add project</a>
        </div>
        <ul class="list-group">
          {{#each projects}}
          <a href="{{pathFor route='project' id=_id}}" class="list-group-item">
            <i class="fa fa-fw fa-files-o"></i> {{description}}
            <i class="fa fa-fw fa-chevron-right pull-right"></i>
          </a>
          {{else}}
          <li class="list-group-item">No projects</li>
          {{/each}}
        </ul>
      </div>

      <div class="panel panel-default">
        <div class="panel-heading" id="purchase-orders">
          Purchase Orders
          <a href="#" id="add-purchase-order" class="btn btn-primary btn-xs pull-right">Add purchase order</a>
        </div>
        <ul class="list-group">
          {{#each purchaseOrders}}
          <a href="{{pathFor route='purchaseOrder' id=_id}}" class="list-group-item">
            <i class="fa fa-fw fa-shopping-cart"></i> {{description}}
            <i class="fa fa-fw fa-chevron-right pull-right"></i>
          </a>
          {{else}}
          <li class="list-group-item">No purchase orders</li>
          {{/each}}
        </ul>
      </div>
      
      
      {{#with this}} 
        {{> taskDisplay entity_type="contact" entity_id=_id}} 
      {{/with}}
      
      
    </div>
  </div>

  <div class="row">
    <div class="col-md-10 col-md-offset-2">
      <h1 id="activity-timeline">
        Activity Timeline
        <a href="#" class="btn btn-primary pull-right" id="add-activity"><i class="fa fa-plus"></i> Add activity</a>
      </h1>
      {{> activityTimeline activities=activities}}
    </div>
  </div>

  {{> autoformModals}} {{/with}}
</template>
