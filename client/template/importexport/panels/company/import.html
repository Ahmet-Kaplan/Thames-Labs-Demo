<template name="companyDataManagement">
  <li>
    <a data-toggle="dropdown" >Import<span class="caret"></span></a>
    <ul class="dropdown-menu pull-right" role="menu">
      <li><a href="#" id="company-data-upload-link">Import from CSV</a></li>
      <li class="divider"></li>
      <li><a href="#" id="company-template">Download company import template</a></li>
      <li class="divider"></li>
      <li><a href="#" id="company-template-help">How does this work?</a></li>
      <input type="file" id="company-data-upload" style="display:none;">
    </ul>
    {{#if CompanyImportInProgress}}
      <span class="label label-sm label-info">Import in progress, do not leave this page whilst this message is displayed.</span>
    {{/if}}
  </li>
</template>

<template name="importCompanyMapper">
  <div class="modal fade" id="draggableModal" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
      <div class="modal-content">

        <div class="modal-header">
          {{#unless importStatus}}<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>{{/unless}}
          <h4> Company data mappings</h4>
        </div>

        <div class="modal-body">
          <div id='mapInputs'>
            <div class="row" style="padding-bottom:2px;">
              <div class="col-md-6">
                <small><span class="requiredField">*</span> denotes a required field.</small>
              </div>
            </div>

            <div class="row" style="padding-bottom:2px;">
              <div class="col-md-3">Name <span class="requiredField">*</span></div>
              <div class="col-md-9">
                <select id="nameColumn" disabled="{{#if importStatus}}disabled{{/if}}">
                  <option value="" selected>Do not import</option>
                  {{{requiredDataInputs}}}
                </select>
              </div>
            </div>
            <div class="row" style="padding-bottom:2px;">
              <div class="col-md-3">Address</div>
              <div class="col-md-9">
                <select id="addressColumn" disabled="{{#if importStatus}}disabled{{/if}}">
                  <option value="" selected>Do not import</option>
                  {{{requiredDataInputs}}}
                </select>
              </div>
            </div>
            <div class="row" style="padding-bottom:2px;">
              <div class="col-md-3">City</div>
              <div class="col-md-9">
                <select id="cityColumn" disabled="{{#if importStatus}}disabled{{/if}}">
                  <option value="" selected>Do not import</option>
                  {{{requiredDataInputs}}}
                </select>
              </div>
            </div>
            <div class="row" style="padding-bottom:2px;">
              <div class="col-md-3">County</div>
              <div class="col-md-9">
                <select id="countyColumn" disabled="{{#if importStatus}}disabled{{/if}}">
                  <option value="" selected>Do not import</option>
                  {{{requiredDataInputs}}}
                </select>
              </div>
            </div>
            <div class="row" style="padding-bottom:2px;">
              <div class="col-md-3">Postcode</div>
              <div class="col-md-9">
                <select id="postcodeColumn" disabled="{{#if importStatus}}disabled{{/if}}">
                  <option value="" selected>Do not import</option>
                  {{{requiredDataInputs}}}
                </select>
              </div>
            </div>
            <div class="row" style="padding-bottom:2px;">
              <div class="col-md-3">Country</div>
              <div class="col-md-9">
                <select id="countryColumn" disabled="{{#if importStatus}}disabled{{/if}}">
                  <option value="" selected>Do not import</option>
                  {{{requiredDataInputs}}}
                </select>
              </div>
            </div>
            <div class="row" style="padding-bottom:2px;">
              <div class="col-md-3">Website</div>
              <div class="col-md-9">
                <select id="websiteColumn" disabled="{{#if importStatus}}disabled{{/if}}">
                  <option value="" selected>Do not import</option>
                  {{{requiredDataInputs}}}
                </select>
              </div>
            </div>
            <div class="row" style="padding-bottom:2px;">
              <div class="col-md-3">Phone</div>
              <div class="col-md-9">
                <select id="phoneColumn" disabled="{{#if importStatus}}disabled{{/if}}">
                  <option value="" selected>Do not import</option>
                  {{{requiredDataInputs}}}
                </select>
              </div>
            </div>
          </div>

          <div class="row" style="padding-bottom:2px;" id="extInfoSpecifiers">
            <div class="col-md-12">
              <b>Custom Fields</b>
              {{#each ExtInfoFields}}
              <div class="row" style="padding-bottom:2px;">
                <div class="col-md-3">
                  {{this.name}}
                </div>
                <div class="col-md-8">
                  <select class="extInfoOption" id="EXCOL_{{this.name}}" disabled="{{#if importStatus}}disabled{{/if}}">
                    <option value="" selected>Do not import</option>
                    {{{this.options}}}
                  </select>
                </div>
              </div>
              {{/each}}
            </div>
          </div>

          The above fields will be read from your CSV file and used to build up a list of your companies.
          <div class="checkbox">
            <label>
              <input id="cbIgnoreExtInfo" type="checkbox">
              Any unused fields will be imported as custom fields. If you do not wish for this to happen, please un-tick this checkbox.
            </label>
          </div>
        </div>

        <div class="modal-footer">
          <button class="btn btn-primary pull-right" id="confirm-mapping">{{#unless CompanyImportInProgress}}Proceed with import{{else}}<i class="fa fa-fw fa-spinner"></i> Importing, please wait...{{/unless}}</button>
        </div>

      </div>
    </div>
  </div>
</template>
