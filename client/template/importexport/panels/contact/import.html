<template name="contactDataManagement">
  <button type="button" class="btn btn-default" data-toggle="dropdown">
    <i class="fa fa-fw fa-upload"></i>
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" role="menu">
    <li><a href="#" id="contact-data-upload-link">Import from CSV</a></li>
    <li class="divider"></li>
    <li><a href="#" id="contact-template-help">How does this work?</a></li>
    <input type="file" id="contact-data-upload" style="display:none;">
  </ul>
  
  {{#if ContactImportInProgress}}
    <li>
      <span class="nav-btn-info">Import in progress, do not leave this page whilst this message is displayed.</span>
    </li>
  {{/if}}
</template>

<template name="importContactMapper">
  <div class="modal fade" id="draggableModal" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
      <div class="modal-content">

        <div class="modal-header">
          {{#unless importStatus}}<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>{{/unless}}
          <h4> Contact data mappings</h4>
        </div>

        <div class="modal-body">
          <div id='mapInputs'>
            <div class="row" style="padding-bottom:2px;">
              <div class="col-md-6">
                <small><span class="requiredField">*</span> denotes a required field.</small>
              </div>
            </div>

            <div class="row" style="padding-bottom:2px;">
              <div class="col-md-3">Forename <span class="requiredField">*</span></div>
              <div class="col-md-9">
                <select id="forenameColumn" disabled="{{#if importStatus}}disabled{{/if}}">
                  <option value="" selected>Do not import</option>
                  {{{requiredDataInputs}}}
                </select>
              </div>
            </div>

            <div class="row" style="padding-bottom:2px;">
              <div class="col-md-3">Surname <span class="requiredField">*</span></div>
              <div class="col-md-9">
                <select id="surnameColumn" disabled="{{#if importStatus}}disabled{{/if}}">
                  <option value="" selected>Do not import</option>
                  {{{requiredDataInputs}}}
                </select>
              </div>
            </div>

            <div class="row" style="padding-bottom:2px;">
              <div class="col-md-3">Email <span class="requiredField">*</span></div>
              <div class="col-md-9">
                <select id="emailColumn" disabled="{{#if importStatus}}disabled{{/if}}">
                  <option value="" selected>Do not import</option>
                  {{{requiredDataInputs}}}
                </select>
              </div>
            </div>

            <div class="row" style="padding-bottom:2px;">
              <div class="col-md-3">Phone</div>
              <div class="col-md-9">
                <select id="phoneColumn" disabled="{{#if importStatus}}disabled{{/if}}">
                  <option value="" selected>Do not import</option>
                  {{{requiredDataInputs}}}
                </select>
              </div>
            </div>

            <div class="row" style="padding-bottom:2px;">
              <div class="col-md-3">Mobile</div>
              <div class="col-md-9">
                <select id="mobileColumn" disabled="{{#if importStatus}}disabled{{/if}}">
                  <option value="" selected>Do not import</option>
                  {{{requiredDataInputs}}}
                </select>
              </div>
            </div>

            <div class="row" style="padding-bottom:2px;">
              <div class="col-md-3">Job Title</div>
              <div class="col-md-9">
                <select id="jobTitleColumn" disabled="{{#if importStatus}}disabled{{/if}}">
                  <option value="" selected>Do not import</option>
                  {{{requiredDataInputs}}}
                </select>
              </div>
            </div>

            <div class="row" style="padding-bottom:2px;">
              <div class="col-md-3">Company</div>
              <div class="col-md-9">
                <select id="companyColumn" disabled="{{#if importStatus}}disabled{{/if}}">
                  <option value="" selected>Do not import</option>
                  {{{requiredDataInputs}}}
                </select>
              </div>
            </div>

            <div class="row" style="padding-bottom:2px;">
              <div class="col-md-3">Address</div>
              <div class="col-md-9">
                <select id="addressColumn" disabled="{{#if importStatus}}disabled{{/if}}">
                  <option value="" selected>Do not import</option>
                  {{{requiredDataInputs}}}
                </select>
              </div>
            </div>

            <div class="row" style="padding-bottom:2px;">
              <div class="col-md-3">City</div>
              <div class="col-md-9">
                <select id="cityColumn" disabled="{{#if importStatus}}disabled{{/if}}">
                  <option value="" selected>Do not import</option>
                  {{{requiredDataInputs}}}
                </select>
              </div>
            </div>

            <div class="row" style="padding-bottom:2px;">
              <div class="col-md-3">County</div>
              <div class="col-md-9">
                <select id="countyColumn" disabled="{{#if importStatus}}disabled{{/if}}">
                  <option value="" selected>Do not import</option>
                  {{{requiredDataInputs}}}
                </select>
              </div>
            </div>

            <div class="row" style="padding-bottom:2px;">
              <div class="col-md-3">Postcode</div>
              <div class="col-md-9">
                <select id="postcodeColumn" disabled="{{#if importStatus}}disabled{{/if}}">
                  <option value="" selected>Do not import</option>
                  {{{requiredDataInputs}}}
                </select>
              </div>
            </div>

            <div class="row" style="padding-bottom:2px;">
              <div class="col-md-3">Country</div>
              <div class="col-md-9">
                <select id="countryColumn" disabled="{{#if importStatus}}disabled{{/if}}">
                  <option value="" selected>Do not import</option>
                  {{{requiredDataInputs}}}
                </select>
              </div>
            </div>

            <div class="row" style="padding-bottom:2px;" id="extInfoSpecifiers">
              <div class="col-md-12">
                <b>Extended Information</b>
                {{#each ExtInfoFields}}
                <div class="row" style="padding-bottom:2px;">
                  <div class="col-md-3">
                    {{this.name}}
                  </div>
                  <div class="col-md-8">
                    <select class="extInfoOption" id="EXCOL_{{this.name}}" disabled="{{#if importStatus}}disabled{{/if}}">
                      <option value="" selected>Do not import</option>
                      {{{this.options}}}
                    </select>
                  </div>
                </div>
                {{/each}}
              </div>
            </div>

          </div>
          The above fields will be read from your CSV file and used to build up a list of your contacts.
          <div class="checkbox">
            <label>
              <input id="cbIgnoreExtInfo" type="checkbox">
              Any unused fields will be imported as extended information. If you do not wish for this to happen, please un-tick this checkbox.
            </label>
          </div>

            <div class="checkbox">
              <label>
                <input id="cbAutoCreateCompanies" type="checkbox">
                By checking this box, the importer will auto-create a company if one cannot be matched using an imported contact's record. 
              </label>
            </div>

        </div>

        <div class="modal-footer">
          {{#unless importStatus}}<button class="btn btn-primary pull-right" id="confirm-mapping">Proceed with import</button>{{else}}
          <button class="btn btn-primary pull-right" disabled="disabled" id="confirm-mapping">Imported {{importedSoFar}} of {{totalToImport}} records...</button>{{/unless}}
        </div>

      </div>
    </div>
  </div>
</template>
