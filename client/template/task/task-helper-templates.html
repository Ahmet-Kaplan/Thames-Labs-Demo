<template name="taskDisplay">
  <div class="{{#if isDashboard}}grid-stack-item-content{{/if}} panel panel-default" id="entityTaskList">
    <div class="panel-heading" id="tasks">
      <i class="fa fa-fw fa-tasks"></i>
      {{#if isDashboard}}
        My tasks
        <a class="btn btn-xs pull-right"><button type="button" class="close" id="close_taskWidget" aria-hidden="true">Ã—</button></a>
        <div class="btn-group pull-right">
          <a href="#" id="btnRecentlyCompleted" class="btn btn-{{#if showComp}}success{{else}}default{{/if}} btn-xs">Show completed</a>
          {{#if isInRole 'Administrator,CanCreateTasks'}}
          <a href="#" id="btnAddTaskToEntity" class="btn btn-primary btn-xs" data-toggle="tooltip" data-placement="bottom" title="New task to be completed"><i class="fa fa-fw fa-plus"></i> Add</a>
          {{/if}}
        </div>
      {{else}}
        Tasks
        <div class="btn-group pull-right">
          <a href="#" id="btnRecentlyCompleted" class="btn btn-{{#if showComp}}success{{else}}default{{/if}} btn-xs">Show completed</a>
          {{#if isInRole 'Administrator,CanCreateTasks'}}
          <a href="#" id="btnAddTaskToEntity" class="btn btn-primary btn-xs" data-toggle="tooltip" data-placement="bottom" title="New task to be completed"><i class="fa fa-fw fa-plus"></i> Add</a>
          {{/if}}
        </div>
      {{/if}}
    </div>
    <div class="panel-body">
      <ul class="list-group" id='taskContainer'>
        {{#each tasks}} 

          <a class="list-group-item" href="{{pathFor route='task' id=_id}}">
            <div class="row">
              <div class="col-md-4">
                {{#if isInRole 'Administrator,CanEditTasks'}}
                  {{#if completed}}
                    <i class="fa fa-fw fa-check-circle task-green task-completed"></i>
                  {{else}}
                    <i class="fa fa-fw fa-check-circle-o task-completed"></i>
                  {{/if}}
                {{else}}
                  {{#if completed}}
                    <i class="fa fa-fw fa-check-circle task-green"></i>
                  {{else}}
                    <i class="fa fa-fw fa-check-circle-o"></i>
                  {{/if}}
                {{/if}}
                {{title}}
              </div>
              <div class="col-md-3">
                Assignee: {{taskAssignee}}
                {{#unless completed}}
                  {{#if formattedDueDate}}<br>Due {{formattedDueDate}}{{/if}}
                {{/unless}}
              </div>
              <div class="col-md-4">
                <span class="pull-right">{{> tagBadges}}</span>
              </div>
              <div class="col-md-1">
                <i class="fa fa-fw fa-chevron-right pull-right"></i>
              </div>
            </div>
          </a>

        {{else}}
        <li class="list-group-item">No tasks added</li>
        {{/each}}
      </ul>
    </div>
  </div>
</template>
